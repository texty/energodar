<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    
    
    <script src="libs/jquery-1.11.1.js"></script>
    <script src='https://texty.org.ua/documents/149/scrollama.min.js'></script>

    <link href="https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js"></script>

   

</head>

<body>

<style>
    body {
        background-color: black;
    }

    main {
        max-width: 850px;
        margin: auto;
        display: grid;
        grid-template-columns: repeat(auto-fill, 200px);
        justify-content: center;
    }

    @media(max-width:800px){
        main { grid-template-columns: repeat(auto-fill, 150px); }
        rect { stroke-width: 3px; }
        text { font-size: 14px; }
    }

    @media(max-width:465px){
        main { grid-template-columns: 1fr 1fr }
        rect { stroke-width: 3px; }
        text { font-size: 14px; }
    }


    #legend {
        width: 100%;
        margin-top: 30px;
    }

    #legend p {
        color: grey;
        margin: 5px 0;
        font-size: 13px;
        font-family: sans-serif;
        display: flex;
        align-items: center;
    }

    #legend p span {
        display: inline-block;
        width: 15px;
        height: 15px;
        margin-right: 5px;
    }

    text {
        font-family: sans-serif;
        font-size: 8px;
    }

    rect {
            stroke-width: 1px;
        }

    *:focus {
        outline: none;
    }

    #tip {
        color:lightgray;
    }

    .calendar {
        cursor: pointer
    }

    .tip-subtitle {
        font-size: 12px;
        font-family:sans-serif;
        margin-bottom: 0;
        line-height: 0;
    }

    p.tip-p {
        font-family:sans-serif;
        margin-top:0;
        font-size: 13px;
    }

    .type-indicator {
        display:inline-block; 
        margin-left: 5px;
        width:10px;
        height:10px;
         border-radius:50%;
    }

    #map {
        width: 100%;
        height: 100vh;
    }

   

    #scroll {        
        position: relative;
        width: 100%;
        margin: 0 auto 50px auto;    
        display: grid;
        grid-template-columns: 3fr 1.5fr;
    }
  
  .scroll__graphic {        
        width: 100%;  
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        left: 1em;
        max-height: 100vh;
        z-index: -1; 
        background-color: white;
    }   

    .scroll__text {         
        width: 100%; 
        max-width: 500px;   
        margin-left: auto;
        z-index: 100;
        color: white;
        position:relative;
        background-color:rgba(18, 18, 18, 0.8)
    }

    .step {
        width: 100%;
        height: max-content;
        min-height: 50px;
        margin-bottom: 80vh;
    } 

    .step > div {
        padding: 20px; 
        /* background-color: rgba(255, 255, 255, 0.9); */
    }

    @media(max-width: 800px){
        #map {
            width: 100%;
            height: 50vh;
        }

        #scroll {
            display: block;
        }

        .scroll__graphic { 
            z-index: 20;
         }

         .scroll__text {  
            z-index: 10;
        }

        .step {
            margin-bottom: 40vh;
        }
    }
    
   

    .hightlited {
        background-color: #cf616378;
        padding: 0 3px
    }

    .step img {
        max-width: 95%;
        
    }
 

    .step .grid-wrapper {
        display: grid;
        margin: 10px 0;
        grid-template-columns: 2.5fr 1fr;
    }

    figcaption {
        font-size: 13px;
    }

    iframe {
        margin: 20px 0;
    }

     .mapboxgl-popup-content {
        line-height: 1.4;
    }

    video {
    width: 100%;
    max-height: 100%;
}

   







</style>

<section id='scroll' class="desktop-only">
    <div class='scroll__graphic sticky'>
        <div id="map"></div>
    </div>


    <div class='scroll__text'>
        <div class="step" data-polygons='["r1", "r2", "r3", "r4", "r5", "r6"]' data-points='[]'>
            <div>
            <p><span class="hightlited">4 березня</span> 2022 року на Запорізькій атомній станції (ЗАЕС) у робочому стані перебував лише <span class="show-popup" data-clicl="[34.584317,47.510076]"> енергоблок № 4.</span>
                Енергоблок № 1 був на планово-попереджувальному ремонті.
                Енергоблоки № 2 і № 3 — відімкнено від мережі та переведено в безпечний стан.
                Енергоблоки № 5 і № 6 — переведено в безпечний стан.
                </p>
                <img src="img/zaporizka-aes_large.jpg"/>
            </div>
        </div>

        <div class="step" data-polygons='["r5", "r6", "d1", "d2", "d3", "d4", "d5", "d6", "electric"]'  data-points='[]'>
            <div>
            <p>Саме енергоблоки № 5 і № 6 регулярно відмикаються від енергомережі через російські обстріли ліній електропередач, і тоді спрацьовує останній запобіжник ядерної катастрофи — дизельні генератори.
                За час окупації ЗАЕС тричі було повністю знеструмлено: 25 серпня, 2 жовтня і 2 листопада. 
                Наприкінці 2022 року всі шість реакторів Запорізької АЕС зупинено, але вони й досі споживають електроенергію з української енергосистеми. Росіяни блокують їх підключення.</p>
            </div>
        </div>

        <div class="step" data-polygons='["training", "ad1", "r1"]'  data-points='["p3"]'>
            <div>
            <p>Опівночі з камери спостереження, розташованої в адмінбудівлі на території ЗАЕС, почалася <a href="https://www.youtube.com/watch?v=fYUT36YGOh8&t=4882s" target="_blank"> пряма трансляція</a> захоплення станції російською армією. Камера пропрацювала кілька годин, доки росіяни захопили станцію.</p>
            
            
            <p>Російський снаряд влучив в енергоблок № 1 і пошкодив обшивку реактора. Два снаряди влучили поблизу сховища відпрацьованого ядерного палива, як повідомив Енергоатом.</p>
                
            <div class="grid-wrapper">
                <img src="img/training_center.jpg"/>
                <figcaption>Навчально-тренувальний центр ЗАЕС після обстрілів російською армією</figcaption>
            </div>
            
            <div class="image-wrapper">
                <img src="img/rustank_znpp.jpeg"/>
                <figcaption>Підбитий нацгвардійцями російський танк залишився на території станції. Гармата націлена на енергоблок № 1. Фото: Енергоатом</figcaption>
            </div>
                
            </div>
        </div>

        <div class="step" data-polygons='["per1"]'  data-points='[]'>
            <div>
                <p><span class="hightlited">15 березня</span> керівник НАЕК “Енергоатом” Петро Котін заявив, що на території ЗАЕС перебуває близько 400 російських військових, 50 одиниць техніки і багато вибухівки та зброї.
                </p>
        </div>
        </div>

        <div class="step" data-polygons='["fort1", "fort2", "fort3", "fort4", "fort5", "fort6", "weap1", "security"]'>
            <div>
                <p>Червневі супутникові знімки (з сайту Planet) свідчать, що російські військові звели фортифікаційні споруди навколо ЗАЕС. Про це <span class="hightlited">24 червня</span> також заявив мер Енергодара. Подальші знімки демонструють активне використання й розростання укріплень: у промзоні вздовж дороги з Енергодара до ЗАЕС, на узбережжі біля станції, біля пожежної частини. 
                    <img src="img/29_10_planet.png"/>
                    Фото: Твіттер журналіста Bellingcat Вілема Званенбурга </p>
            </div>
        </div>

        <div class="step" data-polygons='["pond1", "pond2"]' data-points='[]'>
            <div>
                <p><span class="hightlited">29 червня</span> російські військові закатували водолаза гідроцеху ЗАЕС Андрія Гончарука. Його змушували пірнати в охолоджувальний басейн ЗАЕС. Вимога — осушити охолоджувальний басейн нібито для перевірки його чаш щодо наявності закладеної раніше зброї — провокація, яку вигадали росіяни. 
                </p>
         </div>
        </div>

        
        <div class="step" data-polygons='["hall1", "hall2", "hall3"]' data-points='[]'>
            <div>
                <p>Військові наказали адміністрації ЗАЕС відчинити машинні зали на енергоблоках № 1, № 2 і № 3, щоб розмістити там свій військовий арсенал. У машинній залі енергоблоку № 1 зібрано щонайменше 14 одиниць важкої військової техніки з боєкомплектом, зброя та вибухівка, як повідомив Енергоатом. Пізніше інформацію про розташування військових і боєкомлекту в машинних залах станції підтвердили джерела Insider на ЗАЕС і співрозмовник BBC — інженер, який працював там під час окупації.
                </p>

                <div class="image-wrapper">
                    <img src="img/weapon_hall.jpg"/>
                    <figcaption>Фото МАГАТЕ</figcaption>
                </div>
         </div>
        </div>

        
        <div class="step" data-polygons='["r1", "hall1"]' data-points='["p1", "p4"]'>
            <div>
                <p><span class="hightlited">22 липня</span> український дрон-камікадзе завдав удару по російському військовому наметовому містечку та техніці, розташованим навпроти енергоблоку № 1. Влучив у три зенітні установки та БМ-21 "Град". Троє військових загинули, 12 було травмовано. <br>
                <iframe width="100%" height="315" src="https://www.youtube.com/embed/F9QmY0RKx8M" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                   
                </p>
            </div>
        </div>

        
        <div class="step" data-polygons='["hall1", "r1", "est", "weap1"]' data-points='[]'>
            <div>
                <p><span class="hightlited">5 серпня</span> The Insider <a href="https://youtu.be/dQ_Gua00oiI" target="_blank">оприлюднив відео</a> з доказами переміщення військової техніки біля реакторів.<br> 
                    Також розслідувачі з посиланням на джерела повідомили про замінування машинної зали енергоблоку № 1 і території навколо ЗАЕС; про  розміщення “Градів” поблизу села Водяне; про боєприпаси, що зберігаються біля енергоблоків, усередині й під естакадами.</p>
            </div>
        </div>

        
        <div class="step" data-polygons='["est","corp2", "grad"]' data-points='[]'>
            <div>
                <p>Про естакади, під якими росіяни зберігали військову техніку, <a href="https://www.bbc.com/ukrainian/features-62532425" target="_blank"> згадував в анонімному інтерв’ю BBC</a> один з інженерів станції. “Наприклад, під естакадою біля спецкорпусу № 2 іноді стоять БМ «Град» з боєкомплектом”, — повідомив він. Також розповів, що бачив російські артилерійські установки на майданчику, де зберігаються важкі металеві конструкції, як-от свіжі парогенератори. </p>
                <div class="image-wrapper">
                    <img src="img/maxar_est.jfif"/>
                    <figcaption></figcaption>
                </div>

            </div>
        </div>

        
        <div class="step" data-polygons='["electric"]' data-points='[]'>
            <div>
                <p><span class="hightlited">5 серпня</span> почалися обстріли ЗАЕС, націлені на знищення енергетичної інфраструктури, що поєднує станцію з українською енергомережею. О 14:30 було зафіксовано влучання у високовольтну лінію зв’язку 330 кВ ВРП автотрансформатора ЗАЕС, повідомила Запорізька ТЕС.</p>
            </div>
        </div>

        
        <div class="step" data-polygons='["dry"]' data-points='["p2"]'>
            <div>
                <p>6 серпня  Енергоатом повідомив про влучання російських боєприпасів по майданчику ЗАЕС поблизу сухого сховища відпрацьованого ядерного палива (ССВЯП), витік якого може спричинити екологічну катастрофу. У сховищі зберігається 174 контейнери по 24 збірки відпрацьованого ядерного палива. Через обстріли пошкоджено датчики радіаційного моніторингу, що мають сповіщати про витік радіації.</p>
            </div>
        </div>

        
        <div class="step" data-polygons='["hall1", "ad1", "r1"]' data-points='[]'>
            <div>
                <p>Обстріл ЗАЕС: Енергоатом повідомляє про п’ять “прильотів” у районі комендатури станції — неподалік дільниці зварки та сховища джерел випромінювання. Пошкоджено насосну станцію господарсько-побутових стоків. </p>
            </div>
        </div>

        
        <div class="step" data-polygons='["r1", "r2", "hall1", "hall2", "est"]' data-points='[]'>
            <div>
                <p><span class="hightlited">22 серпня</span> до ремонтної зони станції росіяни додатково завезли два БТР та шість спецвантажівок, повідомляє Енергоатом.
                    Загалом на території станції було дислоковано понад 40 одиниць військової техніки. Біля енергоблоку № 1 — 16, біля № 2 — 7. Ще 12 загнали під естакаду.</p>
            </div>
        </div>

        
        <div class="step" data-polygons='["r5", "r6", "electric"]' data-points='[]'>
            <div>
                <p><span class="hightlited">25 серпня</span> ЗАЕС уперше повністю вимкнули.
                    Унаслідок пошкодження повітряної лінії ПЛ-750 кВ “Дніпровська” вимкнено енергоблоки № 5 і № 6. </p>
            </div>
        </div>

        
        <div class="step" data-polygons='["corp1", "corp2", "est"]' data-points='[]'>
            <div>
                <p><span class="hightlited">26 серпня</span> снарядом пробито дах спецкорпусу № 1, є влучання неподалік спецкорпусу № 2 та естакади.</p>
                <div class="image-wrapper">
                    <img src="img/maxar 29.08_2.jfif"/>
                    <figcaption></figcaption>
                </div>
            </div>
        </div>
        
        <div class="step" data-polygons='["dry"]' data-points='["p2"]'>
            <div>
                <p><span class="hightlited">1 вересня</span> представник росіян пояснив директору МАГАТЕ Рафаелю Гроссі, що снаряд у мить приземлення розвертається на 180 градусів навколо своєї осі, тому він стирчить із землі так, ніби прилетів з окупованої росіянами території.</p>

                <video src="video/file.mp4" type="video/mp4" controls>
                    <!-- <source /> -->
                </video>   
            </div>
        </div>

        
        <div class="step" data-polygons='["per1"]' data-points='[]'>
            <div>
                <p><span class="hightlited">У ніч з 2 на 3 вересня</span> росіяни обстрілювали Нікополь з локації, близької до ЗАЕС, про що свідчить <a href="https://youtu.be/6jSQw35mJrA" target="_blank">відео, оприлюднене The Insider</a> .
                     </p>
            </div>
        </div>

        
        <div class="step" data-polygons='["r6", "st1"]' data-points='[]'>
            <div>
                <p>Вибух міни на периметрі ЗАЕС. 
                    <span class="hightlited">29 вересня</span> на лінії подачі напруги на азотно-кисневу станцію від енергоблоку № 6 стався вибух. “Причина в тому, що периметр ЗАЕС заміновано російськими військовими, — повідомляє Енергоатом. — Уже було шість випадків, коли на мінах підривалися собаки, лисиці й дикі кабани”.</p>
            </div>
        </div>

        
        <div class="step" data-polygons='["hole"]' data-points='[]'>
            <div>
                <p><span class="hightlited">30 вересня</span> росіяни викрали гендиректора ЗАЕС Ігоря Мурашова й завезли його до катівні “Яма” (за повідомленням The Wall Street Journal). Його звільнили з полону 3 жовтня завдяки широкому розголосу та втручанню гендиректора МАГАТЕ.</p>
                <div class="image-wrapper">
                    <img src="img/murashov.jpg"/>
                    <figcaption></figcaption>
                </div>
            </div>
        </div>

        
        <div class="step" data-polygons='["pond"]' data-points='[]'>
            <div>
                <p><span class="hightlited">26 жовтня</span> стало відомо, що в охолоджувальному басейні від переохолодження загинула риба, яка виконувала санітарну функцію та забезпечувала чистоту охолоджувальних трубок конденсатора турбіни. Тепла вода не потрапляє у ставок-охолоджувач через зупинку ЗАЕС.</p>
            </div>
        </div>

        
        <div class="step" data-polygons='["per1", "r5", "r6", "d1", "d2", "d3", "d4", "d5", "d6"]' data-points='[]'>
            <div>
                <p><span class="hightlited">2 листопада</span> ЗАЕС було знеструмлено через обстріли високовольтних ліній зв’язку з українською енергосистемою, почали працювати дизель-генератори. Енергоблоки № 5 і  № 6 переведено в холодний стан.</p>
            </div>
        </div>

        <div class="step" data-polygons='["dry", "r6", "corp2"]' data-points='["p6"]'>
            <div>
                <p><span class="hightlited">7 грудня</span> Енергоатом повідомив, що росіяни розмістили кілька реактивних систем залпового вогню (РСЗВ) “Град” біля енергоблока № 6, поруч із територією станційного сухого сховища відпрацьованого ядерного палива, де раніше в таємному режимі будували деякі “захисні споруди”. </p>
            </div>
        </div>

        <div class="step" data-polygons='[]' data-points='[]'>
            <div>
                <p>"На станції тривають роботи з випробування та введення в експлуатацію пересувних котлів на дизельному пальному, щоб запобігти замерзанню критичних систем ЗАЕС у зимовий період", — ідеться у звіті МАГАТЕ за 13 грудня. Мобільні дизельні котли потужністю 1-3 МВт встановлені та працюють на одному з енергоблоків, ще декілька розміщено в інших місцях на майданчику. </p>
            </div>
        </div>

        <div class="step" style="margin-bottom: 0" data-polygons='[]' data-points='[]'>
            <p></p>
            
        </div>

        

    </div>
</section>

<main>
    <div id="legend">
       <p><span style="border: 2px solid #5B1A1B;"></span>Захоплення міста</p>
       <p><span style="background-color:#CF6162;"></span>Шантаж і загроза ЗАЕС</p>
       <p><span style="border-radius: 50%; background-color: #346294; transform: scale(0.7);"></span>Спротив енергодарців</p>
       <p><span style="border-radius: 50%; background-color: red; transform: scale(0.7);"></span>Обстріли Енергодара</p>
       <p><span style="border-radius: 50%; background-color: #74997F;"></span>Місія МАГАТЕ</p>
       <p><span style="border-radius: 50%; background-color: #5B1A1B;"></span>Окупація та зміна інфопростору</p>

    </div>
    
</main>
<div id="tip"></div>




<script src="map.js"></script>
<script>
//here we've used some tips from https://bl.ocks.org/mbostock/4063318



var width = 120,
    height = 120,
    cellSize = 16,
    innerCellSize = 12;

const dayFormatter_function = function(d) { return (d.getDay() + 6) % 7; }; 
const month_list = d3.range(1,12,1);


const localeMonth = {
    1:"Лютий",
    2:"Березень",
    3:"Квітень",
    4:"Травень",
    5:"Червень",
    6:"Липень",
    7:"Серпень",
    8:"Вересень",
    9:"Жовтень",
    10:"Листопад",
    11:"Грудень"
}

const template = document.getElementById('tip');
// template.style.display = 'block';

const color = d3.scaleOrdinal()
    .domain(["Спротив енергодарців", "Обстріли Енергодара",  'Місія МАГАТЕ', "Окупація та зміна інформаційного простору"])
    .range(["#346294", "red", "#74997F", "#5B1A1B"])
    .unknown("white");

const radius = d3.scaleOrdinal()
    .domain(["Спротив енергодарців", "Обстріли Енергодара",  'Місія МАГАТЕ', "Окупація та зміна інформаційного простору"])
    .range(["3", "3", "6", "6"]);



d3.csv("calendar_data_cleaned.csv", function(csv){

    var types_list = d3.map(csv, function(d){ return d.type}).keys();

    
    csv.forEach(function(d){ d.date = new Date(d.date) })

    //За цими категоріями фільтруємо квадрати
    // дати захоплення
    var stroked = csv.filter(function(d){ return d.type === "Захоплення міста"}).map(function(d){ return d.date});
    // дати захоплення
    var peachy = csv.filter(function(d){ return d.type === "Шантаж і загроза ЗАЕС"}).map(function(d){ return d.date});
 
    //дані розбиті по місяцях, по ним далі додаємо кола
    var nested_by_month = d3.nest()
        .key(function(d){return d.month;})
        .key(function(d){return d.type;})
        .entries(csv);


month_list.forEach(function(month){

    var svg = d3.select("main")
        .append("svg")
        .style("overflow", "visible")
        .attr("width",  "100%")
        .attr("height",  "100%")
        .attr("viewBox",  `0 0 120 120`)
        .append("g")
        .attr("transform", "translate(" + 0 + "," + 10 + ")");

    svg.append('text')
        .attr("x", 0)
        .attr("y", 10)
        .text(localeMonth[month])
        .attr("fill", "grey")
        .style("text-transform", "uppercase")

    //базові квадратики самого календаря
    var rect = svg
        .selectAll("rect")
        .data(function(d) { 
            return d3.timeDays(new Date(2022, month, 1), new Date(2022, month+1, 1)); })
        .enter().append("rect")
            .attr("class", 'calendar')
            .attr("width", innerCellSize)
            .attr("height", innerCellSize)
            // .attr("class", "day-rect")
            .attr("y", function(d) { return  getWeekNo(d) * cellSize })
            .attr("x", function(d) { return dayFormatter_function(d) * cellSize; })
            .attr("fill", "#333")
            .attr("data-tippy-content", function(d){
                let selected_day = csv.filter(function(k){
                    return k.date.toDateString() === d.toDateString()
                });

                var tip_html = `<p class='tip-date'>${d.toLocaleDateString('uk-UK', { year: 'numeric', month: 'long', day: 'numeric' })}</p><p>`

                selected_day.forEach(function(item){
                    tip_html = tip_html + 
                        `<span class="tip-subtitle">${item.description}</span> `
                        // `<span class='type-indicator' style="background-color: ${color(item.type)};"></span></h2>`
                        // `<p class='tip-p'>${item.full_description}</p>`
                })

                tip_html = tip_html + "</p>"

                if(selected_day.length > 0){
                    return tip_html
                } else {
                    return `<p class='tip-date'>${d.toLocaleDateString('uk-UK', { year: 'numeric', month: 'long', day: 'numeric' })}</p><p class='tip-p'>Про цей день нічого не відомо</p>`
                }
               
            });
            
            tippy('.calendar', {
                allowHTML: true,
                //trigger: "click",
                maxWidth: 250,

            });
    
    //фільтруємо дані за вказаним місяцем і додаємо маркери на календар
    let filtered = nested_by_month.filter(function(d){
        return d.key.toString() === (month+1).toString()
        });

    var small_circles_data = filtered[0].values
        .filter(function(d){ return ["Спротив енергодарців", "Обстріли Енергодара"].includes(d.key) })

    var big_circle_data = filtered[0].values
        .filter(function(d){ return ['Місія МАГАТЕ', "Окупація та зміна інформаційного простору"].includes(d.key) });
    


    big_circle_data.forEach(function(type,i){

        let theColor = color(type.key);
        let theRadius = radius(type.key);

        type.values.forEach(function(d){

            svg.append("circle")
            .attr("class", "t_"+i)
            .attr("r", theRadius)
            .attr("cy", function() { 
                return (getWeekNo(d.date) * cellSize) + innerCellSize/2 })
            .attr("cx", function() {
                return  dayFormatter_function(d.date) * cellSize + innerCellSize/2  })
            .attr("fill", theColor)
            .style("pointer-events", "none");

        })
        })


    small_circles_data.forEach(function(type,i){

        let theColor = color(type.key);
        let theRadius = radius(type.key);

        type.values.forEach(function(d){

            svg.append("circle")
            .attr("class", "t_"+i)
            .attr("r", theRadius)
            .attr("cy", function() { 
                return (getWeekNo(d.date) * cellSize) + innerCellSize/2 })
            .attr("cx", function() {
                return  dayFormatter_function(d.date) * cellSize + innerCellSize/2  })
            .attr("fill", theColor)
            .style("pointer-events", "none");

        })
    })


    rect.filter(function(d){
        let date1 = new Date(Date.UTC(d.getFullYear(),d.getMonth(), d.getDate()))    
            return (stroked.find(date => date.getTime() === date1.getTime())) != undefined;
        })
        .attr("stroke", "brown")
       


    rect.filter(function(d){
        let date1 = new Date(Date.UTC(d.getFullYear(),d.getMonth(), d.getDate()))    
            return (peachy.find(date => date.getTime() === date1.getTime())) != undefined;
        })
        .attr("fill", "#CF6162")
    })


function getWeekNo(date) {
    var day = date.getDate()
    day += (date.getDay() == 0 ? 0 : 7 - date.getDay());
    return Math.ceil(parseFloat(day) / 7);
}

});






</script>